<form
  [formGroup]="form"
  (ngSubmit)="onSubmit()"
  class="formgrid grid p-fluid"
  id="admin__form"
  *ngIf="!isLoading; else loading"
>
  <div class="field col-6">
    <label class="block">Email</label>
    <input formControlName="email" type="text" pInputText required />
    <small
      class="p-error block"
      *ngIf="form.controls.email.touched && form.controls.email.invalid"
    >
      Name is
      <span *ngIf="form.controls.email.hasError('required')"> required </span>
      <span *ngIf="form.controls.email.hasError('email')">invalid</span>
    </small>
  </div>

  <div class="field col-6">
    <label class="block">Name</label>
    <input formControlName="name" type="text" pInputText required />
    <small
      class="p-error block"
      *ngIf="
        form.controls.name.touched && form.controls.name.hasError('required')
      "
    >
      Name is required
    </small>
  </div>
  <div class="field col-6">
    <label class="block">Phone Number</label>
    <p-inputMask
      mask="(999) 99-999-999"
      formControlName="phone"
      placeholder="(999) 99-999-999"
    ></p-inputMask>
    <small
      class="p-error block"
      *ngIf="
        form.controls.phone.touched && form.controls.phone.hasError('required')
      "
    >
      Phone number is required
    </small>
  </div>
  <div class="field col-6">
    <label class="block">Street</label>
    <input formControlName="street" type="text" pInputText required />
    <small
      class="p-error block"
      *ngIf="
        form.controls.street.touched &&
        form.controls.street.hasError('required')
      "
    >
      Street is required
    </small>
  </div>
  <div class="field col-3">
    <label class="block">Country</label>
    <p-dropdown
      [options]="objCountry"
      formControlName="country"
      optionLabel="name"
      optionValue="_id"
      [filter]="true"
      filterBy="name"
      [showClear]="true"
      placeholder="Select a country"
    ></p-dropdown>
    <small
      class="p-error block"
      *ngIf="
        form.controls.country.touched &&
        form.controls.country.hasError('required')
      "
    >
      Country is required
    </small>
  </div>
  <div class="field col-3">
    <label class="block">Apartment</label>
    <input formControlName="apartment" type="text" pInputText required />
    <small
      class="p-error block"
      *ngIf="
        form.controls.apartment.touched &&
        form.controls.apartment.hasError('required')
      "
    >
      Apartment is required
    </small>
  </div>
  <div class="field col-3">
    <label class="block">City</label>
    <input formControlName="city" type="text" pInputText required />
    <small
      class="p-error block"
      *ngIf="
        form.controls.city.touched && form.controls.city.hasError('required')
      "
    >
      City is required
    </small>
  </div>
  <div class="field col-3">
    <label class="block">Zip</label>
    <input formControlName="zip" type="text" pInputText required />
    <small
      class="p-error block"
      *ngIf="
        form.controls.zip.touched && form.controls.zip.hasError('required')
      "
    >
      Zip is required
    </small>
  </div>
  <div class="field col-12" *ngIf="errorMessage">
    <small class="p-error">
      {{ errorMessage }}
    </small>
  </div>
  <div class="col-12">
    <button type="submit" class="btn btn--primary">
      <i class="pi pi-save"></i>Save
    </button>
    <button type="button" class="btn btn--light" (click)="onRefresh()">
      <i class="pi pi-refresh"></i>Discuss
    </button>
  </div>
</form>
<ng-template #loading>
  <div class="custom-loader"></div>
</ng-template>
